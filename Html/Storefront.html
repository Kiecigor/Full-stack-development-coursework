<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>After School Classes</title>
  <link rel="stylesheet" href="../CSS/Coursework 1.css" />
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>

<div id="app">
  <!-- Page Title -->
  <header class="page-header">
    <h1>Welcome To School Activities Store</h1>
  </header>

  <!-- Navbar -->
  <nav class="navbar">      
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="Storefront.html" class="active">Store</a></li>
    </ul>
  </nav>

  <!-- Search Bar -->
  <section class="search-bar">
    <input type="text" v-model="searchQuery" placeholder="Search classes, tutors, or keywords..." />
     <button @click="searchClasses">Search</button>
  </section>

  <!-- Sort Bar -->
  <div class="sort-bar">
    <label for="sortSelect">Sort by:</label>
    <select v-model="sortOption">
      <option value="">Select...</option>
      <option value="asc">Price: Low to High</option>
      <option value="desc">Price: High to Low</option>
      <option value="az">Name: A ‚Üí Z</option>
      <option value="za">Name: Z ‚Üí A</option>
    </select>
  </div>

  <!-- Page Layout -->
  <main class="page-layout">

    <!-- Available Classes Section -->
<section class="container">
  <h2>Buy Classes</h2>
  <div class="class-list">
    <div class="card" v-for="cls in filteredAndSortedClasses" :key="cls.id">
      <img :src="cls.image" :alt="cls.name" class="card-image">
      <h3>{{ cls.name }}</h3>
      <p>{{ cls.description }}</p>

      <!-- Styled location -->
      <p class="location">
        üìç <em>{{ cls.location }}</em>
      </p>

      <p><strong>Price:</strong> ${{ cls.price.toFixed(2) }}</p>
      <p><strong>Seats Left:</strong> {{ cls.seats }}</p>
      <button 
        :disabled="cls.seats === 0" 
        @click="addToCart(cls)"
      >
        {{ cls.seats === 0 ? 'Fully Booked' : 'Add to Cart' }}
      </button>
    </div>
  </div>
</section>

    <!-- Cart Section -->
    <aside class="cart-section" v-if="cart.length">
      <h2>Your Cart</h2>
      <ul>
        <li v-for="(item, index) in cart" :key="index">
          {{ item.name }} - ${{ item.price.toFixed(2) }}
          <button @click="removeFromCart(index)">Remove</button>
        </li>
      </ul>
      <p><strong>Total:</strong> ${{ totalPrice.toFixed(2) }}</p>
      <button @click="checkout">Checkout</button>
    </aside>

  </main>
</div>

<script>
const { createApp } = Vue;

createApp({
  data() {
    return {
      searchQuery: '',
      sortOption: '',
      cart: [],
      classes: [
        { id: 1, name: "Java programming", price: 15, description: "Learn how to code with Java", image: "../Images/Java.jpg", location: "Online", seats: 30 },
        { id: 2, name: "Artificial Intelligence", price: 25, description: "Learn more about AI", image: "../Images/AI.jpg", location: "London Campus", seats: 30 },
        { id: 3, name: "Data Science and Machine Learning", price: 20, description: "Learn machine learning", image: "../Images/Machine.jpg", location: "Manchester Campus", seats: 30 },
        { id: 4, name: "Information in Organisations", price: 10, description: "Learn SQL and databases", image: "../Images/SQL.jpg", location: "Online", seats: 30 },
        { id: 5, name: "Web Development", price: 30, description: "Build modern websites", image: "../Images/web.jpg", location: "London Campus", seats: 30 },
        { id: 6, name: "Cybersecurity Fundamentals", price: 18, description: "Protect systems and data", image: "../Images/Cyber.jpg", location: "Online", seats: 30 },
        { id: 7, name: "Cloud Computing", price: 22, description: "Explore cloud tech", image: "../Images/cloud.jpg", location: "London Campus", seats: 30 },
        { id: 8, name: "Mobile App Development", price: 28, description: "Build Android/iOS apps", image: "../Images/Mobile.jpg", location: "London Campus", seats: 30 },
        { id: 9, name: "Blockchain Technology", price: 35, description: "Learn blockchain", image: "../Images/Blockchain.jpg", location: "Online", seats: 30},
        { id: 10, name: "UI/UX Design", price: 12, description: "Learn UI/UX design", image: "../Images/UI.jpg", location: "London Campus", seats: 30 }
      ]
    };
  },
  computed: {
    filteredAndSortedClasses() {
      // Filter
      let result = this.classes.filter(cls =>
        cls.name.toLowerCase().includes(this.searchQuery.toLowerCase()) ||
        cls.description.toLowerCase().includes(this.searchQuery.toLowerCase()) ||
        cls.location.toLowerCase().includes(this.searchQuery.toLowerCase())
      );

      // Sort
      if (this.sortOption === 'asc') {
        result.sort((a, b) => a.price - b.price);
      } else if (this.sortOption === 'desc') {
        result.sort((a, b) => b.price - a.price);
      } else if (this.sortOption === 'az') {
        result.sort((a, b) => a.name.localeCompare(b.name));
      } else if (this.sortOption === 'za') {
        result.sort((a, b) => b.name.localeCompare(a.name));
      }

      return result;
    },
    totalPrice() {
      return this.cart.reduce((sum, item) => sum + item.price, 0);
    }
  },
  methods: {
    addToCart(cls) {
      if (cls.seats > 0) {
        this.cart.push(cls);
        cls.seats--;
      } else {
        alert("‚ö†Ô∏è This class is fully booked!");
      }
    },
    removeFromCart(index) {
      const removed = this.cart.splice(index, 1)[0];
      removed.seats++;
    },
    checkout() {
      if (this.cart.length === 0) {
        alert("üõí Your cart is empty!");
        return;
      }
      alert(`‚úÖ Thank you for your purchase of $${this.totalPrice.toFixed(2)}!`);
      // Restore seats
      this.cart.forEach(item => item.seats++);
      this.cart = [];
    }
  }
}).mount('#app');



</script>

</body>
</html>